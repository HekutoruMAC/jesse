import{T as ke,d as Ce,_ as Te,a as $e,b as Ve,c as je}from"./DnL0gPsn.js";import{c as u,o as i,b as a,g as ie,h as Se,i as b,b6 as S,r as k,j as z,k as ze,b7 as Me,z as f,t as v,H as Le,a3 as Re,b8 as Ae,F as H,m as P,a as Ue,M as A,C as B,d as o,w as j,T as Oe,y as De,q as E,A as c,x as Fe,B as K,W as He,V as Ne,X as Ie,e as Y,b9 as Be,Y as Ee,D as _,Z as G,aW as ne,aX as oe}from"./DZZKgsqu.js";import{_ as Pe}from"./BGvZsjkj.js";import{_ as We}from"./CcF3GtdP.js";import{s as Ze,l as Je,d as Xe}from"./lA_J2Fq2.js";import{_ as qe}from"./B4IRRImw.js";import{u as Ke}from"./CjVGyZM0.js";import"./FOxFg4HT.js";function Ye(W,U){return i(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z","clip-rule":"evenodd"})])}function Ge(W,U){return i(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M10.5 3A1.501 1.501 0 0 0 9 4.5h6A1.5 1.5 0 0 0 13.5 3h-3Zm-2.693.178A3 3 0 0 1 10.5 1.5h3a3 3 0 0 1 2.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 0 1-3 3H6.75a3 3 0 0 1-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15Z","clip-rule":"evenodd"})])}const Qe={key:0,class:"mb-2 p-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 rounded-md"},et={class:"text-sm font-medium"},tt={class:"mt-2 flex items-center justify-between"},at={class:"flex items-center"},st=["value"],lt=ie({__name:"ObjectiveCurveChart",props:{data:{}},setup(W){const U=Se(),l=b(()=>U.value),n=S(),$=k(null),C=W,O=b(()=>{const r=n.results.generalInfo.find(w=>w[0]==="Objective Function");return r?{sharpe:"sharpe_ratio",calmar:"calmar_ratio",sortino:"sortino_ratio",omega:"omega_ratio",serenity:"serenity_index","smart sharpe":"smart_sharpe","smart sortino":"smart_sortino"}[r[1].toLowerCase()]||r[1].toLowerCase():"sharpe_ratio"}),x=k(null);let g=null,D=null,T=null;const N=b(()=>C.data.length>0&&C.data[0].training?Object.keys(C.data[0].training):[]),h=b({get:()=>n.results.selectedObjectiveMetric,set:r=>{n.results.selectedObjectiveMetric=r}});z(N,r=>{if(!n.results.selectedObjectiveMetric&&r.length){const d=O.value;r.includes(d)?h.value=d:h.value=r[0]}},{immediate:!0});const Z=b(()=>C.data.map(d=>({trial:d.trial,training:d.training[h.value]!==void 0?d.training[h.value]:null,testing:d.testing[h.value]!==void 0?d.testing[h.value]:null})));function Q(){if(x.value)try{$.value=null;const r={...Ze,width:x.value.clientWidth,height:300,timeScale:{timeVisible:!1,secondsVisible:!1,tickMarkFormatter:d=>Math.floor(d)},localization:{timeFormatter:d=>Math.floor(d)}};g=ke(x.value,r),D=g.addLineSeries({color:"#60A5FA",lineWidth:2,title:"Training"}),T=g.addLineSeries({color:"#F87171",lineWidth:2,title:"Testing"}),M(l.value),I()}catch(r){F(r)}}function I(){if(!(!D||!T))try{$.value=null;const r=Z.value.sort((y,ee)=>y.trial-ee.trial),d=r.filter(y=>y.training!==null).map(y=>({time:y.trial,value:y.training})),w=r.filter(y=>y.testing!==null).map(y=>({time:y.trial,value:y.testing}));D.setData(d),T.setData(w),g==null||g.timeScale().fitContent()}catch(r){F(r)}}function F(r){console.error("Chart error:",r),$.value=`Failed to render chart: ${r.message||"Unknown error"}`,g&&(g.remove(),g=null,D=null,T=null)}function M(r){if(g)try{g.applyOptions(r==="light"?Je.chart:Xe.chart)}catch(d){F(d)}}function m(){if(g&&x.value)try{g.applyOptions({width:x.value.clientWidth})}catch(r){F(r)}}ze(()=>{Q(),window.addEventListener("resize",m)}),Me(()=>{g&&(g.remove(),g=null),window.removeEventListener("resize",m)}),z(Z,I),z(h,I),z(l,M);function J(r){return r.replace(/_/g," ").toUpperCase()}return(r,d)=>(i(),u("div",null,[$.value?(i(),u("div",Qe,[a("p",et,v($.value),1)])):f("",!0),a("div",{ref_key:"chartContainer",ref:x,class:"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600",style:{"min-height":"300px"}},null,512),a("div",tt,[d[2]||(d[2]=Le('<div class="flex items-center" data-v-a7d13feb><span class="text-xs mr-2 rounded bg-white dark:bg-gray-700 p-1" data-v-a7d13feb><span class="inline-block" style="background-color:#60A5FA;width:25px;height:10px;" data-v-a7d13feb></span><span class="ml-2" data-v-a7d13feb>Training</span></span><span class="text-xs mr-2 rounded bg-white dark:bg-gray-700 p-1" data-v-a7d13feb><span class="inline-block" style="background-color:#F87171;width:25px;height:10px;" data-v-a7d13feb></span><span class="ml-2" data-v-a7d13feb>Testing</span></span></div>',1)),a("div",at,[d[1]||(d[1]=a("label",{class:"text-sm text-gray-700 dark:text-gray-300 mr-2"},"Metric:",-1)),Re(a("select",{"onUpdate:modelValue":d[0]||(d[0]=w=>h.value=w),class:"text-sm py-1 px-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-800"},[(i(!0),u(H,null,P(N.value,w=>(i(),u("option",{key:w,value:w},v(J(w)),9,st))),128))],512),[[Ae,h.value]])])])]))}}),nt=Ue(lt,[["__scopeId","data-v-a7d13feb"]]),ot={key:0,class:"divide-y divide-gray-200 dark:divide-gray-700"},it=["onClick"],rt={class:"grid grid-cols-6 text-center items-center"},ut={class:"col-span-2 flex items-center text-sm"},dt={class:"text-gray-500 dark:text-gray-400"},ct={class:"flex items-center text-sm"},gt={class:"text-gray-500 dark:text-gray-400"},vt={class:"text-sm"},mt={class:"text-sm text-gray-500 dark:text-gray-400"},ft={key:1,class:"py-4 text-center text-gray-500 dark:text-gray-400"},_t={key:0,class:"mb-8"},pt={key:1,class:"mb-8"},yt={key:2},bt={key:0,class:"mb-8"},xt={class:"mt-16"},ht={class:"border border-gray-200 bg-white dark:border-gray-700 rounded-lg overflow-hidden"},wt={class:"flex justify-between font-semibold p-4 bg-gray-100 dark:bg-gray-900 text-sm"},kt={class:"w-[33%] text-center"},Ct={key:0},Tt={class:"w-[12%] text-sm font-medium"},$t={class:"w-[15%] text-sm"},Vt={class:"w-[33%] text-sm text-center"},jt={class:"w-[24%] text-sm"},St={class:"w-[16%] flex justify-center space-x-1"},zt={key:1,class:"text-center py-4 text-gray-500 dark:text-gray-400"},Mt={key:3},Lt={class:"mb-8"},Rt={class:"flex items-center select-none flex-1 mb-4"},At={class:"flex items-center select-none flex-1 mb-4"},Ut={class:"select-none"},Ot={class:"grid grid-cols-1 gap-6"},Dt={class:"select-none"},Ft={class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},Ht={key:0,class:"italic font-bold"},Nt={key:0},It={key:1,class:"flex flex-col items-center justify-center select-none"},Bt={class:"mb-8 w-full"},Et={class:"flex flex-col gap-4 mt-4"},Pt=["textContent"],Wt={key:2},Zt={class:"mb-8 w-full"},Jt={class:"flex flex-col gap-4 mt-4"},Xt={key:3,class:"mt-8 w-full"},qt={class:"p-4"},Kt={class:"mt-4"},Yt={class:"w-full text-sm"},Gt={class:"w-full"},Qt={class:"w-full flex justify-between bg-gray-50 dark:bg-gray-800 py-2 px-4"},ea={class:"w-full flex justify-between py-2 px-4"},ta={class:"w-full flex justify-between bg-gray-50 dark:bg-gray-800 py-2 px-4"},aa={class:"w-full flex justify-between py-2 px-4"},sa={class:"w-full"},la={class:"font-bold"},na={class:"w-full"},oa={class:"w-1/3 font-bold italic"},ia={class:"w-1/3 text-center"},ra={class:"w-1/3 text-center"},ua={class:"flex justify-end mt-8 space-x-2"},ya=ie({__name:"index",setup(W){Ke({title:"Optimization - Jesse"});const U=S(),l=b(()=>U.form),n=b(()=>U.results),$=k(!1),C=k(!1),O=k([]),x=k(!1),g=k([]),D=b(()=>A().jesseSupportedTimeframes.map(s=>({label:s,value:s}))),T=k([]);async function N(){T.value=await A().getExchangeSupportedSymbols(l.value.exchange);for(let s=0;s<l.value.routes.length;s++)T.value.includes(l.value.routes[s].symbol)||(l.value.routes[s].symbol=T.value[0])}l.value.exchange=l.value.exchange||A().backtestingExchangeNames[0],N();const h=b(()=>B.remainingTimeText(n.value.progressbar.estimated_remaining_seconds)),Z=b(()=>{const s=n.value.generalInfo.find(e=>e[0]==="Objective Function");return s?s[1]:"sharpe"});function Q(){if(O.value.length){for(let s=0;s<O.value.length;s++)G("error",O.value[s]);return}if(l.value.routes.length>1){G("error","Optimization mode does not support multiple routes at the moment.");return}S().start()}function I(){navigator.clipboard.writeText(n.value.infoLogs),G("success","Info logs copied successfully"),C.value=!0,setTimeout(()=>{C.value=!1},3e3)}async function F(){await S().pause(),await te(l.value.id)}z(()=>l.value.training_start_date,s=>{l.value.training_finish_date<s&&(l.value.training_finish_date=s)}),z(()=>l.value.training_finish_date,s=>{l.value.training_start_date>s&&(l.value.training_start_date=s),l.value.testing_start_date<s&&(l.value.testing_start_date=s)}),z(()=>l.value.testing_start_date,s=>{l.value.testing_finish_date<s&&(l.value.testing_finish_date=s),s<l.value.training_finish_date&&(l.value.testing_start_date=l.value.training_finish_date)}),z(()=>l.value.testing_finish_date,s=>{l.value.testing_start_date>s&&(l.value.testing_start_date=s)});const M=k(!1),m=k({});function J(s){navigator.clipboard.writeText(s),G("success","DNA copied to clipboard")}function r(s){m.value=s,M.value=!0}function d(){x.value=!0,w()}async function w(){try{const e=(await ne("/optimization/sessions",{},!0)).data.value;g.value=(e==null?void 0:e.sessions)||[]}catch(s){oe(s)}}function y(s){switch(s.toLowerCase()){case"running":return"blue";case"finished":return"green";case"stopped":return"red";case"paused":return"yellow";default:return"gray"}}async function ee(s){await S().loadSession(s)&&(await te(s),x.value=!1)}const ae=b(()=>n.value.status==="paused");async function re(){await S().rerun(),await te(l.value.id)}async function ue(s){try{const e=await ne(`/optimization/sessions/${s}`,{},!0);if(e.error.value)return null;const V=e.data.value;return V==null?void 0:V.session}catch(e){return oe(e),null}}async function te(s){if(!x.value||!g.value.length)return;const e=await ue(s);if(!e)return;const V=g.value.findIndex(X=>X.id===s);V!==-1&&(g.value[V]=e)}const se=b(()=>{const s=A().plan;return s==="free"||s==="guest"||s===""}),de=b(()=>{const s=A().systemInfo.cpu_cores||1;return se.value?Math.min(6,s):s});return(s,e)=>{const V=Te,X=Oe,ce=Pe,ge=We,ve=Ve,L=He,me=nt,p=Fe,fe=qe,_e=je,q=Ie,le=Be,pe=Ee,ye=$e,be=Ne,xe=Ce,he=De;return i(),u(H,null,[o(X,{modelValue:n.value.logsModal,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value.logsModal=t),title:"Logs"},{default:j(()=>[o(V,{logs:n.value.infoLogs},null,8,["logs"])]),buttons:j(()=>[a("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:I},[C.value?(i(),E(c(Ye),{key:0,class:"h-6 w-6","aria-hidden":"true"})):f("",!0),!C.value&&n.value.infoLogs.length!=0?(i(),E(c(Ge),{key:1,class:"h-6 w-6","aria-hidden":"true"})):f("",!0)])]),_:1},8,["modelValue"]),o(X,{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=t=>x.value=t),title:"Optimization History"},{default:j(()=>[g.value.length?(i(),u("div",ot,[(i(!0),u(H,null,P(g.value,t=>(i(),u("div",{key:t.id,class:"py-3 px-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded cursor-pointer transition-colors",onClick:R=>ee(t.id)},[a("div",rt,[a("div",ut,[a("span",dt,v(t.id.substring(0,5))+"-"+v(t.state.form.routes[0].strategy),1)]),a("div",ct,[a("span",gt,v(t.completed_trials)+" trials",1)]),a("div",vt,[o(ce,{color:y(t.status),label:t.status,variant:"soft",size:"sm"},null,8,["color","label"])]),a("div",mt,v(c(B).timestampToReadableDateTime(t.updated_at)),1),e[25]||(e[25]=a("div",{class:"text-gray-400"},[a("i",{class:"i-heroicons-chevron-right h-5 w-5"})],-1))])],8,it))),128))])):(i(),u("div",ft," No optimization history found "))]),_:1},8,["modelValue"]),o(xe,null,{left:j(()=>[n.value.alert.message?(i(),u("div",_t,[o(ge,{color:"teal",icon:"i-heroicons-check-circle",variant:"soft",title:n.value.alert.message,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"white",variant:"link"},onClose:e[2]||(e[2]=t=>n.value.alert.message="")},null,8,["title"])])):f("",!0),n.value.exception.error&&n.value.executing?(i(),u("div",pt,[o(ve,{modelValue:$.value,"onUpdate:modelValue":e[3]||(e[3]=t=>$.value=t),title:n.value.exception.error,content:n.value.exception.traceback,mode:"optimize"},null,8,["modelValue","title","content"])])):f("",!0),(n.value.executing||n.value.showResults)&&!n.value.exception.error?(i(),u("div",yt,[n.value.objective_curve.length?(i(),u("div",bt,[o(L,{title:"Objective Progress",class:"mb-4"}),o(me,{data:n.value.objective_curve},null,8,["data"])])):f("",!0),a("div",xt,[o(L,{title:"Best Trials",class:"my-4"}),e[30]||(e[30]=a("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"}," Showing top 20 trials sorted by fitness score ",-1)),a("div",ht,[a("div",wt,[e[26]||(e[26]=a("div",{class:"w-[12%]"},"Rank",-1)),e[27]||(e[27]=a("div",{class:"w-[15%]"},"Trial",-1)),a("div",kt,"Training/Testing "+v(Z.value),1),e[28]||(e[28]=a("div",{class:"w-[24%]"},"Fitness",-1)),e[29]||(e[29]=a("div",{class:"w-[16%] text-center"},"Actions",-1))]),n.value.best_candidates.length?(i(),u("div",Ct,[(i(!0),u(H,null,P(n.value.best_candidates,(t,R)=>(i(),u("div",{key:R,class:K(["flex items-center justify-between border-t border-gray-200 dark:border-gray-700 p-2 dark:bg-gray-700",{"bg-gray-50 dark:bg-gray-800":R%2===0}])},[a("div",Tt,v(t.rank),1),a("div",$t,v(t.trial),1),a("div",Vt,v(t.objective_metric),1),a("div",jt,v(t.fitness),1),a("div",St,[o(p,{variant:"ghost",color:"gray",icon:"i-heroicons-clipboard-document-list",onClick:we=>J(t.dna)},null,8,["onClick"]),o(p,{variant:"ghost",icon:"i-heroicons-information-circle",onClick:we=>r(t)},null,8,["onClick"])])],2))),128))])):(i(),u("div",zt," No candidates found yet... "))])])])):f("",!0),!n.value.executing&&!n.value.showResults?(i(),u("div",Mt,[o(L,{class:"mb-4",title:"Exchange"}),o(fe,{modelValue:l.value.exchange,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.exchange=t),placeholder:"Select an exchange...",searchable:"",options:c(A)().backtestingExchangeNames,size:"lg",class:"mt-2 mb-16",onChange:N},null,8,["modelValue","options"]),o(_e,{"total-routes-error":O.value,form:l.value,results:n.value,mode:"optimization",symbols:T.value,timeframes:D.value},null,8,["total-routes-error","form","results","symbols","timeframes"]),o(L,{class:"mt-16 mb-4",title:"Duration"}),a("div",Lt,[e[31]||(e[31]=a("h3",{class:"text-sm font-medium text-gray-700 dark:text-gray-200 mb-2"},"Training Period",-1)),a("div",Rt,[o(q,{modelValue:l.value.training_start_date,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.training_start_date=t),type:"date",variant:"outline",size:"lg",class:"w-full mr-2"},null,8,["modelValue"]),o(q,{modelValue:l.value.training_finish_date,"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.training_finish_date=t),type:"date",variant:"outline",size:"lg",class:"w-full ml-2"},null,8,["modelValue"])])]),a("div",null,[e[32]||(e[32]=a("h3",{class:"text-sm font-medium text-gray-700 dark:text-gray-200 mb-2"},"Testing Period",-1)),a("div",At,[o(q,{modelValue:l.value.testing_start_date,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.testing_start_date=t),type:"date",variant:"outline",size:"lg",class:"w-full mr-2"},null,8,["modelValue"]),o(q,{modelValue:l.value.testing_finish_date,"onUpdate:modelValue":e[8]||(e[8]=t=>l.value.testing_finish_date=t),type:"date",variant:"outline",size:"lg",class:"w-full ml-2"},null,8,["modelValue"])])]),o(L,{class:"mt-16 mb-4",title:"Optimal Trades"}),a("div",Ut,[e[33]||(e[33]=a("p",{class:"text-sm text-gray-500 dark:text-gray-400"},[Y(" The number that tells Jesse how many trades you would find optimal for your strategy in the targeted time period so that it can filter out those DNAs that cause too few trades. "),a("a",{href:"https://docs.jesse.trade/docs/optimize/executing-the-optimize-mode.html",target:"_blank",class:"font-semibold hover:underline italic"},"More Details...")],-1)),e[34]||(e[34]=a("br",null,null,-1)),o(le,{modelValue:l.value.optimal_total,"onUpdate:modelValue":e[9]||(e[9]=t=>l.value.optimal_total=t),title:"Optimal number of trades:"},null,8,["modelValue"])]),o(L,{class:"mt-16 mb-4",title:"Options"}),a("div",Ot,[a("div",Dt,[a("p",Ft,[e[35]||(e[35]=Y(" How many CPU cores of your machine would you like to be used for optimization? ")),se.value?(i(),u("span",Ht," (Limited to 6 cores on free plan) ")):f("",!0)]),o(le,{modelValue:l.value.cpu_cores,"onUpdate:modelValue":e[10]||(e[10]=t=>l.value.cpu_cores=t),title:`CPU cores to use (${l.value.cpu_cores} / ${c(A)().systemInfo.cpu_cores}):`,min:1,max:de.value},null,8,["modelValue","title","max"])]),o(pe,{modelValue:l.value.fast_mode,"onUpdate:modelValue":e[11]||(e[11]=t=>l.value.fast_mode=t),title:"Fast Mode",description:"Runs the backtest faster using an improved algorithm. Use with caution as this is experimental."},null,8,["modelValue"])])])):f("",!0)]),right:j(()=>[!n.value.executing&&!n.value.showResults?(i(),u("div",Nt,[a("div",null,[o(p,{class:"w-full flex justify-center",icon:"i-heroicons-bolt",size:"xl",variant:"solid",label:"Start",trailing:!1,onClick:e[12]||(e[12]=t=>Q())}),o(p,{class:"w-full flex justify-center mt-4",icon:"i-heroicons-clock",size:"xl",variant:"solid",color:"gray",label:"History",trailing:!1,onClick:e[13]||(e[13]=t=>d())})])])):f("",!0),n.value.executing&&!n.value.showResults?(i(),u("div",It,[a("div",Bt,[n.value.exception.error?(i(),E(p,{key:0,class:"w-full flex justify-center mt-4",icon:"i-heroicons-arrow-path",size:"xl",variant:"solid",label:"Rerun",trailing:!1,onClick:e[14]||(e[14]=t=>c(S)().rerun())})):n.value.showResults?f("",!0):(i(),E(p,{key:1,color:"gray",ui:{color:{gray:{solid:"text-yellow-500 dark:text-yellow-400"}}},class:"w-full flex justify-center mt-4",icon:"i-heroicons-pause",size:"xl",variant:"solid",label:"Pause",trailing:!1,onClick:e[15]||(e[15]=t=>F())})),a("div",Et,[o(p,{class:"w-full flex justify-center",color:"gray",size:"xl",variant:"solid",label:"Logs",icon:"i-heroicons-document-text",trailing:!1,onClick:e[16]||(e[16]=t=>n.value.logsModal=!0)}),o(p,{class:"w-full flex justify-center",color:"gray",size:"xl",variant:"solid",label:"History",icon:"i-heroicons-clock",trailing:!1,onClick:e[17]||(e[17]=t=>d())})])]),a("div",null,[o(ye,{progress:n.value.progressbar.current},null,8,["progress"])]),!n.value.exception.error&&!n.value.best_candidates.length?(i(),u("h3",{key:0,class:"mt-8 animate-pulse",textContent:v(h.value)},null,8,Pt)):f("",!0)])):f("",!0),n.value.showResults?(i(),u("div",Wt,[a("div",Zt,[ae.value?(i(),E(p,{key:0,class:"w-full flex justify-center",icon:"i-heroicons-play",size:"xl",variant:"solid",color:"primary",label:"Resume",trailing:!1,onClick:e[18]||(e[18]=t=>re())})):f("",!0),o(p,{class:K(["w-full flex justify-center",{"mt-4":ae.value}]),icon:"i-heroicons-arrow-uturn-left",size:"xl",variant:"solid",color:"green",label:"New Session",trailing:!1,onClick:e[19]||(e[19]=t=>c(S)().newSession())},null,8,["class"]),a("div",Jt,[o(p,{class:"w-full flex justify-center",color:"gray",size:"xl",variant:"solid",label:"Logs",icon:"i-heroicons-document-text",trailing:!1,onClick:e[20]||(e[20]=t=>n.value.logsModal=!0)}),o(p,{class:"w-full flex justify-center",color:"gray",size:"xl",variant:"solid",label:"History",icon:"i-heroicons-clock",trailing:!1,onClick:e[21]||(e[21]=t=>d())})])])])):f("",!0),(n.value.executing||n.value.showResults)&&n.value.generalInfo.length?(i(),u("div",Xt,[o(L,{title:"Info",class:"mb-4"}),o(be,{data:n.value.generalInfo},null,8,["data"])])):f("",!0)]),_:1}),o(he,{modelValue:M.value,"onUpdate:modelValue":e[24]||(e[24]=t=>M.value=t)},{default:j(()=>[a("div",qt,[a("div",Kt,[a("div",Yt,[e[42]||(e[42]=a("h2",{class:"text-lg mb-2 font-bold italic dark:text-white text-center"}," Candidate Info ",-1)),a("div",Gt,[a("div",Qt,[e[36]||(e[36]=a("div",{class:"font-bold"},"Rank",-1)),a("div",null,v(m.value.rank),1)]),a("div",ea,[e[37]||(e[37]=a("div",{class:"font-bold"},"Trial",-1)),a("div",null,v(m.value.trial),1)]),a("div",ta,[e[38]||(e[38]=a("div",{class:"font-bold"},"Fitness",-1)),a("div",null,v(m.value.fitness),1)]),a("div",aa,[e[40]||(e[40]=a("div",{class:"font-bold"},"DNA",-1)),o(p,{size:"xs",color:"primary",onClick:e[22]||(e[22]=t=>J(m.value.dna))},{default:j(()=>e[39]||(e[39]=[Y(" Copy DNA ")])),_:1})])]),e[43]||(e[43]=a("h2",{class:"text-lg font-bold italic dark:text-white mt-6 mb-2 text-center"}," Parameters ",-1)),a("div",sa,[(i(!0),u(H,null,P(Object.keys(m.value.params),(t,R)=>(i(),u("div",{key:t,class:K([{"bg-gray-50 dark:bg-gray-800":R%2===0},"w-full flex justify-between py-2 px-4"])},[a("div",la,v(t),1),a("div",null,v(typeof m.value.params[t]=="number"?c(_).round(m.value.params[t],6):m.value.params[t]),1)],2))),128))]),e[44]||(e[44]=a("h2",{class:"text-lg font-bold italic dark:text-white mt-6 mb-2 text-center"}," Metrics Comparison ",-1)),a("div",na,[e[41]||(e[41]=a("div",{class:"flex justify-between py-2 px-4 bg-gray-100 dark:bg-gray-800 font-bold text-sm"},[a("div",{class:"w-1/3 font-bold"},"Metric"),a("div",{class:"w-1/3 text-center font-bold"},"Training"),a("div",{class:"w-1/3 text-center font-bold"},"Testing")],-1)),(i(!0),u(H,null,P([{key:"total",label:"Total Closed Trades"},{key:"net_profit",label:"Total Net Profit",format:t=>`${c(_).round(t.net_profit,2)} (${c(_).round(t.net_profit_percentage,2)}%)`},{key:"starting_balance",label:"Starting => Finishing Balance",format:t=>`${c(_).round(t.starting_balance,2)} => ${c(_).round(t.finishing_balance,2)}`},{key:"total_open_trades",label:"Open Trades"},{key:"fee",label:"Total Paid Fees",round:2},{key:"max_drawdown",label:"Max Drawdown",round:2},{key:"annual_return",label:"Annual Return",format:t=>`${c(_).round(t.annual_return,2)}%`},{key:"expectancy",label:"Expectancy",format:t=>`${c(_).round(t.expectancy,2)} (${c(_).round(t.expectancy_percentage,2)}%)`},{key:"average_win",label:"Avg Win | Avg Loss",format:t=>`${c(_).round(t.average_win,2)} | ${c(_).round(t.average_loss,2)}`},{key:"ratio_avg_win_loss",label:"Ratio Avg Win / Avg Loss",round:2},{key:"win_rate",label:"Win-rate",format:t=>`${c(_).round(t.win_rate*100,2)}%`},{key:"longs_percentage",label:"Longs | Shorts",format:t=>`${c(_).round(t.longs_percentage,2)}% | ${c(_).round(t.shorts_percentage,2)}%`},{key:"average_holding_period",label:"Avg Holding Time",format:t=>c(B).secondsToHumanReadable(t.average_holding_period)},{key:"average_winning_holding_period",label:"Winning Trades Avg Holding Time",format:t=>c(B).secondsToHumanReadable(t.average_winning_holding_period)},{key:"average_losing_holding_period",label:"Losing Trades Avg Holding Time",format:t=>c(B).secondsToHumanReadable(t.average_losing_holding_period)},{key:"sharpe_ratio",label:"Sharpe Ratio",round:2},{key:"calmar_ratio",label:"Calmar Ratio",round:2},{key:"sortino_ratio",label:"Sortino Ratio",round:2},{key:"omega_ratio",label:"Omega Ratio",round:2},{key:"winning_streak",label:"Winning Streak"},{key:"losing_streak",label:"Losing Streak"},{key:"largest_winning_trade",label:"Largest Winning Trade",round:2},{key:"largest_losing_trade",label:"Largest Losing Trade",round:2},{key:"total_winning_trades",label:"Total Winning Trades"},{key:"total_losing_trades",label:"Total Losing Trades"}],(t,R)=>(i(),u("div",{key:t.key,class:K([{"bg-gray-50 dark:bg-gray-800":R%2===0},"w-full flex justify-between py-2 px-4"])},[a("div",oa,v(t.label),1),a("div",ia,v(t.format?t.format(m.value.training_metrics):t.round?c(_).round(m.value.training_metrics[t.key],t.round):m.value.training_metrics[t.key]),1),a("div",ra,v(t.format?t.format(m.value.testing_metrics):t.round?c(_).round(m.value.testing_metrics[t.key],t.round):m.value.testing_metrics[t.key]),1)],2))),128))])])]),a("div",ua,[o(p,{color:"gray",block:"",onClick:e[23]||(e[23]=t=>M.value=!1)},{default:j(()=>e[45]||(e[45]=[Y(" Close ")])),_:1})])])]),_:1},8,["modelValue"])],64)}}});export{ya as default};
